{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="profile-container">
    <img class="profile-pic" src="{% if member.profile_picture %}{{ member.profile_picture.url }}{% else %}{% static 'images/default_avatar.png' %}{% endif %}" alt="Profile Picture">
    
    <h2>{{ profile_user.username }}</h2>

    {% if request.user == profile_user and form %}
    <div class="upload-form">
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form.profile_picture }}
            <br>
            <button type="submit">Update Profile Picture</button>
        </form>
    </div>
    {% endif %}

    <div class="profile-stats">
        <p><span class="label">Joined:</span> {{ member.join_date|date:"F d, Y" }}</p>
        <p><span class="label">Problems Solved:</span> {{ member.problems_solved }}</p>
        <p><span class="label">Total Submissions:</span> {{ member.total_submissions }}</p>
        <p><span class="label">Success Rate:</span> {{ success_rate }}%</p>
        <p><span class="label">Favorite Language:</span> {{ member.favorite_language|default:"Not set" }}</p>
    </div>
</div>
{% endblock %}
