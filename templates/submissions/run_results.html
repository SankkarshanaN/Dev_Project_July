<!-- run_results.html -->
{% extends "base.html" %}
{% block title %}Run Results - {{ problem.title }}{% endblock %}

{% block content %}
<div class="card">
    <h2>🔍 Code Run Results</h2>
    <div class="mb-2">
        <p><strong>Problem:</strong> <a href="{% url 'problem_detail' problem.id %}">{{ problem.title }}</a></p>
        <p><strong>Language:</strong> {{ language }}</p>
        <p><strong>Verdict:</strong> 
          <span class="verdict {% if verdict == 'Accepted' %}accepted{% else %}rejected{% endif %}">
          {% if verdict == 'Accepted' %}✅{% else %}❌{% endif %} {{ verdict }}
          </span>
        </p>

    </div>

    <h3>💻 Your Code:</h3>
    <div class="code-block">{{ code }}</div>

    <h3>🧪 Sample Test Case Results:</h3>
    {% if results %}
    <div class="styled-table">
        <table class="test-results-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Input</th>
                    <th>Expected Output</th>
                    <th>Your Output</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for r in results %}
                <tr class="{% if r.passed %}passed{% else %}failed{% endif %}">
                    <td>{{ forloop.counter }}</td>
                    <td><pre>{{ r.test_case.input_data }}</pre></td>
                    <td><pre>{{ r.test_case.output_data }}</pre></td>
                    <td><pre>{{ r.user_output }}</pre></td>
                    <td>{% if r.passed %}✅ Passed{% else %}❌ Failed{% endif %}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <p>🔍 No sample tests found for this problem.</p>
    {% endif %}

    <div class="mt-3">
        <a class="btn" href="{% url 'problem_detail' problem.id %}">⬅ Back to Problem</a>
    </div>
</div>
{% endblock %}